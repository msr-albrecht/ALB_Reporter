services:
  app:
    build: .
    container_name: alb_reporter_container
    ports:
      - "4055:4055"
    volumes:
      # OneDrive Mirror-Ordner für Fallback (optional)
      - ./onedrive_shared:/app/onedrive_shared
      # CSV-Dateien einbinden
      - ./arbeiter.csv:/app/arbeiter.csv
      # .env Datei für OneDrive-Konfiguration
      - ./.env:/app/.env
      # Datenbank in named volume speichern (nicht als Datei-Mapping)
      - db-data:/app/db
    environment:
      - NODE_ENV=production
      - DOCKER_ENV=true
      - DB_PATH=/app/db/reports.db
      - PORT=4055
      # OneDrive ist ZWINGEND erforderlich - keine lokale Speicherung
    restart: unless-stopped


volumes:
  db-data: